\chapter{Especificação}

\section{Divisão do Projeto}
O projeto pode ser dividido em dois sub-projetos, cada qual lidando com um objetivo listado na seção anterior. O primeiro sub-projeto tem a finalidade de estruturar uma \textbf{rede de sensores} e atuadores utilizando um protocolo aberto, conforme descreve o objetivo i. O segundo sub-projeto busca desenvolver um \textbf{serviço em nuvem} que agregue os dados coletados pela rede de sensores, efetuando, entre outras atividades, o processo de aprendizagem descrito no objetivo ii.

O primeiro passo na especificação consiste na identificação dos \textit{stakeholders}. Em seguida, a especificação do projeto será feita por meio de requisitos funcionais e não-funcionais, que estão listados em três classes:
\begin{itemize}
	\item Requisitos de sistema, relativos à integração de ambos os sub-projetos;
	\item Requisitos da rede de sensores, referente ao sub-projeto dedicado a atingir o objetivo i; 
	\item Requisitos do serviço em nuvem, referente ao sub-projeto dedicado a atingir o objetivo ii.
\end{itemize}

\section{Descrição dos \textit{stakeholders}}
Os seguintes \textit{stakeholders} foram identificados no projeto:
\begin{itemize}
	\item Usuário final, cujo interesse seria adquirir e instalar dispositivos em sua residência, de modo a obter automação residencial. Um perfil possível para este tipo de stakeholder seria uma pessoa com conhecimento técnico básico em computação e redes de computadores. Ele deve ser capaz de conectar os dispositivos na rede desejada (por exemplo, na rede Wi-Fi por onde todo o tráfego deve passar), mas os demais procedimentos de estruturação da rede de sensores segundo o protocolo devem ser feitos de forma transparente;
	\item Desenvolvedor, cujo interesse seria estudar a documentação dos protocolos e algoritmos desenvolvidos, e projetar dispositivos compatíveis. Este stakeholder seria usuário das bibliotecas (APIs) resultantes do projeto. Ele espera encontrar documentos explicando o funcionamento dos protocolos e dos algoritmos desenvolvidos, bem como documentações e exemplos de uso das APIs que deve utilizar. Ainda, estes desenvolvedores consideram como diferencial o fato de a licença de uso das tecnologias disponibilizadas serem abertas e isentas de pagamento.
\end{itemize}

\section{Requisitos Funcionais} \label{sec:reqfunc}
\subsection{De sistema}
\begin{itemize}
	\item O sistema deve coletar dados do ambiente domiciliar e possibilitar a ativação de atuadores automaticamente ou por ação humana;
	\item O sistema deve permitir que o usuário visualize o estado atual do sistema;
	\item O sistema deve se adaptar a alterações de gostos e preferências do usuário.
\end{itemize}

\subsection{Da rede de sensores}
\begin{itemize}
	\item Toda a comunicação deve ser realizada através de um protocolo único e formalizado;
	\item O protocolo de comunicação deve permitir a identificação dos dispositivos da rede, bem como o envio de dados e de comandos de atuação.
\end{itemize}

\subsection{Do serviço em nuvem}
\begin{itemize}
	\item Permitir acesso remoto em qualquer localização para que usuário controle seus dispositivos à distância;
	\item Aprender os hábitos do usuário e configurar a rede de sensores automaticamente para realizar os seus gostos.

\end{itemize}

\section{Requisitos Não-Funcionais} \label{sec:reqnfunc}
\subsection{De sistema}
\begin{itemize}
	\item Fácil instalação de sensores e integração com a nuvem;
	\item Utilizar linguagens, ambientes e bibliotecas abertas.
\end{itemize}

\subsection{Da rede de sensores}
\begin{itemize}
	\item O protocolo de comunicação desenvolvido deve ser aberto, de modo que qualquer fabricante possa criar um dispositivo que compatível com a rede;
	\item Deve possibilitar o uso de diversas tecnologias de comunicação, tais como ZigBee, 802.15.4, e UDP;
	\item O protocolo deve gerar pacotes de tamanhos compatíveis com tecnologias de redes existentes para redes de sensores sem fio;
	\item A rede deve continuar operante mesmo sem acesso à nuvem.
\end{itemize}

\subsection{Do serviço em nuvem}
\begin{itemize}
	\item Disponibilidade de 99\% do tempo; 
	\item API que possibilite o acesso através de aplicações de terceiros/aplicativo/site.
\end{itemize}

\section{Arquitetura do Sistema} \label{sec:arquitetura}
Seguindo a descrição apresentada do projeto, o grupo definiu a arquitetura do sistema de automação residencial conforme mostra a Figura \ref{fig:arquitetura}.

\begin{figure}[h]
	\centering
	\caption{Arquitetura do sistema de automação.}
  \includegraphics[width=0.8\textwidth]{imagens/arquitetura.jpg}
  \label{fig:arquitetura}  
\end{figure}

A arquitetura contém dispositivos sensores e atuadores, que efetuam a coleta de dados nas residência e atuam nelas. Esses dispositivos se conectam a um controlador local, que efetua o gerenciamento dos nós locais (a aceitação de nós na rede, por exemplo), e a interface entre os dispositivos locais e a infraestrutura em nuvem. Tais dispositivos (excluindo a infraestrutura em nuvem) compõem a rede local de sensores e atuadores, e serão o foco do primeiro sub-projeto.

Além disso, constam no diagrama um servidor em nuvem e um serviço de \textit{analytics}. O servidor em nuvem atua como um agregador dos dados coletados pelos diversos controladores locais. Sobre este banco de dados, o serviço de \textit{analytics} (mineração de dados e aprendizagem de máquina) atuará no sentido de derivar padrões de comportamento dos usuários, sugerindo regras de automação residencial. Por fim, aponta-se a existência de um elemento de interface gráfica com a qual o usuário pode interagir com o sistema, representado na arquitetura apresentada como um \textit{smartphone}. O elemento de interface com o usuário se comunica com o servidor em nuvem, e pode eventualmente se comunicar com o controlador local. Tais componentes da arquitetura serão foco do segundo sub-projeto.